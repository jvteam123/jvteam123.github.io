<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Team123 - Project Tracker</title>
      <link rel="stylesheet" href="styles.css">
   </head>
   <body>
      <div class="container">
         <div id="auth-container">
            <h2></h2>
            <button id="signInBtn" class="btn btn-primary btn-lg">Sign in with Google</button>
            <div id="user-info-display" style="display: none;">
               <img id="userPhoto" src="" alt="User Photo">
               <div class="user-details">
                  <p id="userName"></p>
                  <p id="userEmail"></p>
               </div>
               <button id="signOutBtn" class="btn btn-danger">Sign Out</button>
            </div>
         </div>
         <div id="loading-auth-message">
            <p>Please sign in to access the Project Tracker.</p>
         </div>
         <div id="app-content">
            <h1></h1>
            <div class="action-bar">
               <button id="openAddNewProjectBtn" class="btn btn-success btn-lg">‚ûï Add New Tracker</button>
               <button id="openTlDashboardBtn" class="btn btn-primary btn-lg">üëë Project Settings</button>
               <button id="openSettingsBtn" class="btn btn-info btn-lg" style="display:none;">‚öôÔ∏è User Settings</button>
               <button id="openTlSummaryBtn" class="btn btn-info btn-lg">üìù TL Summary</button>
            </div>
            <div id="projectFormModal" class="modal">
               <div class="modal-content">
                  <span class="close-button" id="closeProjectFormBtn">&times;</span>
                  <h2>Add New Tracker</h2>
                  <form id="newProjectForm">
                     <label for="fixCategorySelect">Fix Category:</label>
                     <select id="fixCategorySelect" required>
                        <option value="Fix1">Fix1</option>
                        <option value="Fix2">Fix2</option>
                        <option value="Fix3">Fix3</option>
                        <option value="Fix4">Fix4</option>
                        <option value="Fix5">Fix5</option>
                        <option value="Fix6">Fix6</option>
                     </select>
                     <label for="numRows">Number of Area:</label>
                     <input type="number" id="numRows" value="1" min="1" required>
                     <label for="baseProjectName">Project Name:</label>
                     <input type="text" id="baseProjectName" value="PROJ_ID_XYZ" required>
                     <label for="gsd">GSD:</label>
                     <select id="gsd" required>
                        <option value="3in">3in</option>
                        <option value="9in">9in</option>
                     </select>
                     <button type="submit" class="btn btn-success">Add Project(s)</button>
                  </form>
               </div>
            </div>
            <div id="tlDashboardModal" class="modal">
               <div class="modal-content">
                  <span class="close-button" id="closeTlDashboardBtn">&times;</span>
                  <h2>üëë Project Settings</h2>
                  <div id="tlDashboardContent"></div>
               </div>
            </div>
            <div id="settingsModal" class="modal">
               <div class="modal-content">
                  <span class="close-button" id="closeSettingsBtn">&times;</span>
                  <h2>‚öôÔ∏è User Settings</h2>
                  <h3>Manage Allowed User Emails</h3>
                  <ul id="allowedEmailsList"></ul>
                  <div class="settings-input-group">
                     <input type="email" id="addEmailInput" placeholder="Enter new allowed email">
                     <button id="addEmailBtn" class="btn btn-success">Add Email</button>
                  </div>
               </div>
            </div>
            <div id="tlSummaryModal" class="modal">
               <div class="modal-content">
                  <span class="close-button" id="closeTlSummaryBtn">&times;</span>
                  <h2>üìù TL Summary</h2>
                  <div id="tlSummaryContent" style="max-height: 60vh; overflow-y: auto; font-size: 0.9em; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                     <p>Loading summary...</p>
                  </div>
               </div>
            </div>
            <h3>üìå Team123 Project Tracker</h3>
            <div class="group-selector-controls">
               <label for="batchIdSelect">Select Project:</label>
               <select id="batchIdSelect">
               </select>
               <label for="fixCategoryFilter">Select Fix Category:</label>
               <select id="fixCategoryFilter">
                  <option value="">All Fix Categories</option>
                  <option value="Fix1">Fix1</option>
                  <option value="Fix2">Fix2</option>
                  <option value="Fix3">Fix3</option>
                  <option value="Fix4">Fix4</option>
                  <option value="Fix5">Fix5</option>
                  <option value="Fix6">Fix6</option>
               </select>
            </div>
            <table id="projectTable">
               <thead>
                  <tr>
                     <th>Fix</th>
                     <th style="min-width: 150px;">Project Name</th>
                     <th style="min-width: 80px;">Area</th>
                     <th>GSD</th>
                     <th style="min-width: 110px;">Assigned Tech</th>
                     <th style="min-width: 120px;">Status</th>
                     <th>D1 Start</th>
                     <th>D1 End</th>
                     <th>D2 Start</th>
                     <th>D2 End</th>
                     <th>D3 Start</th>
                     <th>D3 End</th>
                     <th>Total(m)</th>
                     <th style="min-width: 120px;">Tech Notes</th>
                     <th style="min-width: 150px;">Actions</th>
                  </tr>
               </thead>
               <tbody id="projectTableBody"></tbody>
            </table>
         </div>
      </div>
      <div id="loadingOverlay">
         <div class="spinner"></div>
         <p>Loading...</p>
      </div>
      <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
      <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
      <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
      
     <script src="script.js"></script>
</body>
</html>
